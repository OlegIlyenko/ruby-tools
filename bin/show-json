#!/usr/bin/env ruby

require 'sinatra_script'
require 'server_support'
require 'slim'
  
Server.reload(self)

use Server::Assets

set :description, "Show JSON file in the browser"

options do |op|
  op.on('-f', '--fields field1,field2', "Fields to show") {|val| set :fields, val.split(",")}
end

remaining_options do |opts|
  set :file_name, opts[0]
end

get '/' do
  p "Fields to show: ", settings[:fields]
  
  slim :show_json, :locals => {json_file: settings.file_name}
end

